(this["webpackJsonpfour-in-a-row"]=this["webpackJsonpfour-in-a-row"]||[]).push([[0],{19:function(n,e,t){},21:function(n,e,t){"use strict";t.r(e);var r=t(0),c=t.n(r),i=t(5),o=t.n(i),a=t(4),s=t(2),l=t(10),d=t(3),u=Object(d.a)("RESET_BOARD"),b=Object(d.a)("DROP_COIN",(function(n,e){return{payload:{x:n,playerId:e}}})),f=function(){return Array.from({length:7},(function(){return Array.from({length:6},(function(){return 0}))}))},j=function(n,e,t,r,c){for(var i=[];r(t);){var o=t,a=o.x,s=o.y,l=n[a];if(l&&l[s]===e){if(i.push(t),i.length>=4)return i}else i=[];t=c(t)}},v={board:f(),coinsCount:0,filledCols:{},winnerId:void 0},m=Object(d.b)(v,(function(n){n.addCase(u,(function(n){n.board=f(),n.coinsCount=0,n.filledCols={},n.winnerId=void 0})),n.addCase(b,(function(n,e){var t=e.payload,r=t.x,c=t.playerId,i=n.board[r].findIndex((function(n,e,t){var r=t[e+1];return void 0===r||r>0}));n.board[r][i]=c,n.coinsCount++,i||(n.filledCols[r]=!0);var o=function(n,e,t){for(var r=n[e][t],c=e-3,i=e+3,o=t-3,a=t+3,s=j.bind(void 0,n,r),d=[[{x:c,y:t},function(n){return n.x<=i},function(n){return{x:n.x+1,y:n.y}}],[{x:e,y:o},function(n){return n.y<=a},function(n){return{x:n.x,y:n.y+1}}],[{x:c,y:o},function(n){var e=n.x,t=n.y;return e<=i&&t<=a},function(n){return{x:n.x+1,y:n.y+1}}],[{x:c,y:a},function(n){var e=n.x,t=n.y;return e<=i&&t>=o},function(n){return{x:n.x+1,y:n.y-1}}]],u=0,b=d;u<b.length;u++){var f=b[u],v=s.apply(void 0,Object(l.a)(f));if(v)return v}}(n.board,r,i);o&&(o.forEach((function(e){var t=e.x,r=e.y;n.board[t][r]=1/0})),n.winnerId=c)}))})),h=Object(d.a)("RESET_ACTIVE_PLAYER"),x=Object(d.a)("SWITCH_ACTIVE_PLAYER"),O=t(9),y=function n(){var e,t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(O.a)(this,n),this.id=void 0,this.name=void 0,this.colorClass=void 0,this.order=void 0,this.id=++n.count,this.name=null!==(e=r.name)&&void 0!==e?e:"Player ".concat(this.id),this.colorClass=null!==(t=r.colorClass)&&void 0!==t?t:"",this.order=this.id};y.count=0;var C=function(n,e){var t,r=Object.values(n).sort((function(n,e){return n.id-e.id})).sort((function(n,e){return n.order-e.order}));if(!e)return r[0].id;var c=function(t){return r.find((function(r){return t(r)>t(n[e])}))},i=null!==(t=c((function(n){return n.order})))&&void 0!==t?t:c((function(n){return n.id}));return(null!==i&&void 0!==i?i:r[0]).id},p=[new y({colorClass:"text-warning"}),new y({colorClass:"text-danger"})],_={};p.forEach((function(n){_[n.id]=n}));var N={activePlayerId:C(_),players:_},I=Object(d.b)(N,(function(n){n.addCase(h,(function(n){n.activePlayerId=C(n.players)})),n.addCase(x,(function(n){var e=n.activePlayerId,t=n.players;n.activePlayerId=C(t,e)}))})),g=Object(s.b)({board:m,players:I}),w=Object(s.d)(g),E=(t(19),t(1)),P=function(n){var e=n.className,t=n.onClick,r=n.children;return Object(E.jsx)("button",{type:"button",className:"btn btn-sm btn-primary ".concat(null!==e&&void 0!==e?e:""),onClick:t,children:r})},A=function(n){var e=n.items,t=n.itemClassNameFn,r=n.isItemActiveFn,c=function(n){var e=["col-auto"];return t&&e.push(t(n)),r&&r(n)&&e.push("fw-bold"),e.join(" ")};return Object(E.jsx)("div",{className:"row",children:e.map((function(n){return Object(E.jsx)("div",{className:c(n),children:n.name},n.id)}))})},F=function(){var n=Object(a.c)((function(n){return n.board})),e=n.coinsCount,t=n.winnerId,c=Object(a.c)((function(n){return n.players})),i=c.activePlayerId,o=c.players,s=Object(a.b)(),l=t&&o[t],d=e>=42;return Object(E.jsxs)("div",{className:"row align-items-center",children:[Object(E.jsx)("div",{className:"col-4",children:Object(E.jsx)(A,{items:Object.values(o),itemClassNameFn:function(n){return n.colorClass},isItemActiveFn:function(n){return!l&&!d&&n.id===i}})}),Object(E.jsx)("div",{className:"col-4 text-center fs-5",children:l?Object(E.jsxs)(r.Fragment,{children:["Winner: ",Object(E.jsx)("strong",{className:"d-inline-block ".concat(l.colorClass),children:l.name})]}):d&&"Draw"}),Object(E.jsx)("div",{className:"col-auto ms-auto",children:Object(E.jsx)(P,{className:e?"":"invisible",onClick:function(){return s(u())},children:"Restart game"})})]})},k=function(){var n=Object(a.c)((function(n){return n.board})),e=n.board,t=n.coinsCount,c=n.filledCols,i=n.winnerId,o=Object(a.c)((function(n){return n.players})),s=o.activePlayerId,l=o.players,d=Object(a.b)();Object(r.useEffect)((function(){d(t?x():h())}),[t,d]);var u=function(n){switch(n){case 0:return"";case 1/0:return"".concat(l[i].colorClass," animation-flick");default:return"".concat(l[n].colorClass," board__coin_dropped")}};return Object(E.jsxs)("div",{className:"position-relative ".concat(i?"pointer-events-none":""),children:[Object(E.jsx)("div",{className:"board",children:e.map((function(n,e){return Object(E.jsx)("div",{className:"board__col",children:n.map((function(n,e){return Object(E.jsx)("div",{className:"board__item",children:Object(E.jsx)("div",{className:"board__coin ".concat(u(n))})},e)}))},e)}))}),Object(E.jsx)("div",{className:"board board_front",children:e.map((function(n,e){return Object(E.jsx)("div",{className:"board__col ".concat(c[e]?"board__col_filled":""),children:n.map((function(n,t){return Object(E.jsx)("div",{className:"board__item",onClick:function(){return d(b(e,s))},children:Object(E.jsx)("div",{className:"board__hole"})},t)}))},e)}))})]})};var R=function(){return Object(E.jsxs)("div",{className:"container-fluid py-4",children:[Object(E.jsx)("div",{className:"mb-3",children:Object(E.jsx)(F,{})}),Object(E.jsx)(k,{})]})},T=function(n){n&&n instanceof Function&&t.e(3).then(t.bind(null,22)).then((function(e){var t=e.getCLS,r=e.getFID,c=e.getFCP,i=e.getLCP,o=e.getTTFB;t(n),r(n),c(n),i(n),o(n)}))};o.a.render(Object(E.jsx)(a.a,{store:w,children:Object(E.jsx)(c.a.StrictMode,{children:Object(E.jsx)(R,{})})}),document.getElementById("root")),T()}},[[21,1,2]]]);
//# sourceMappingURL=main.62e5b0d1.chunk.js.map